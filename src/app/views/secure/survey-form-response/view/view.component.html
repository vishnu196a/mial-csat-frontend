<div class="card mt-4">
  <div class="card-header">
    <div class="row">
      <div class="col order-1 order-sm-0">
        <button
          class="btn btn-primary d-flex align-items-center"
          type="button"
          title="Back"
          routerLink="../"
        >
          <span class="min-width-18px">
            <i class="fa fa-chevron-left" aria-hidden="true"></i>
          </span>
          <span class="text ml-1 ml-sm-o d-none d-sm-block">Back</span>
        </button>
      </div>
      <div class="col-12 col-sm-auto order-0 order-sm-1">
        <h2 class="text-center">Survey Response</h2>
      </div>
      <div class="col order-2 text-right"></div>
    </div>
  </div>

  <div class="row p-2" *ngIf="surveyResponse">
    <div class="form-group col-12 col-md-6 mt-3">
      <h4 class="font-weight-bold">
        Form Name : <span class="font-weight-normal">{{ surveyResponse.survey_form_name }}</span>
      </h4>
    </div>
    <div class="form-group col-12 mt-3">
      <div *ngFor="let response of surveyResponse.responses; let i = index">
        <div class="card p-2">
          <h5 class="font-weight-bold">{{ i + 1 }}. {{ response.question }}</h5>
          <div class="ml-3" *ngIf="response.type === 'Ratings'">
            <ngb-rating
              readonly="true"
              [rate]="response.rating"
              style="color: darkorange; font-size: 25px"
              [max]="response.max_score"
            ></ngb-rating>
          </div>
          <div *ngIf="response.type === 'Options'">
            <div *ngIf="!response.dependent_questions">
              <div class="row ml-3 d-flex align-items-end">
                <h5>{{ response.option }}</h5>
                <ngb-rating
                  class="ml-2"
                  readonly="true"
                  [rate]="response.option_rating"
                  style="color: darkorange; font-size: 25px"
                  [max]="response.max_score"
                ></ngb-rating>
              </div>
            </div>
            <div *ngIf="response.dependent_questions">
              <h5 class="ml-3 mb-0">{{ response.option }}</h5>
              <div
                *ngFor="let dopt of response.dependent_questions"
                class="row ml-4 mb-0 d-flex align-items-end"
              >
                <h5>{{ dopt.question }}</h5>
                <ngb-rating
                  class="ml-2"
                  readonly="true"
                  [rate]="dopt.ratings"
                  style="color: darkorange; font-size: 25px"
                  [max]="5"
                ></ngb-rating>
              </div>
            </div>
          </div>
          <div *ngIf="response.type === 'Multi Select'">
            <div *ngIf="!response.dependent_questions">
              <div
                *ngFor="let opt of response.multi_select; let i = index"
                class="row ml-3 d-flex align-items-end"
              >
                <h5>{{ opt }}</h5>
                <ngb-rating
                  class="ml-2"
                  readonly="true"
                  [rate]="response.multi_option_rating[i]"
                  style="color: darkorange; font-size: 25px"
                  [max]="response.max_score"
                ></ngb-rating>
              </div>
            </div>
            <div *ngIf="response.dependent_questions">
              <div *ngFor="let mopt of response.multi_select">
                <h5 class="ml-3">{{ mopt }}</h5>
                <div *ngFor="let dmopt of response.dependent_questions">
                  <div class="row ml-4 mb-0 d-flex align-items-end" *ngIf="dmopt.option === mopt">
                    <h5>{{ dmopt.question }}</h5>
                    <ngb-rating
                      class="ml-2"
                      readonly="true"
                      [rate]="dmopt.ratings"
                      style="color: darkorange; font-size: 25px"
                      [max]="5"
                    ></ngb-rating>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div *ngIf="response.type === 'Free Text'">
            <h5 class="ml-3">{{ response.answer }}</h5>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
